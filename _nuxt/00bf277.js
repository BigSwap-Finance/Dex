(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{1237:function(t,e,n){var content=n(1385);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(27).default)("fcb12566",content,!0,{sourceMap:!1})},1381:function(t,e,n){"use strict";(function(t){n.d(e,"c",(function(){return D})),n.d(e,"b",(function(){return F})),n.d(e,"a",(function(){return N}));n(94),n(72),n(49),n(80),n(52),n(76),n(81);var r=n(33),l=n(36),o=n(38),c=n(46),d=n(45),m=n(25),h=n(9),y=(n(40),n(30),n(60),n(64),n(110),n(130),n(44),n(155),n(113),n(406),n(11)),k=n(1194),v=n(1382),f=n(73),S=n(74),M=n.n(S),w=n(4),x=n(3),_=n(19),I=n(5),A=n(586),O=n(169),j=n(120),P=n(0);function T(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return C(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,o=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){c=!0,l=t},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw l}}}}function C(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function W(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(m.a)(t);if(e){var l=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,l)}else n=r.apply(this,arguments);return Object(d.a)(this,n)}}function D(t,e){return V.apply(this,arguments)}function V(){return(V=Object(h.a)(regeneratorRuntime.mark((function t(e,n){var r,l,o,c,d,m,h,y,k,v,S,I,A,j,C;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(_.c)(new w.PublicKey(x.j),new w.PublicKey(n),x.a);case 3:if(r=t.sent.toString(),!f.a.find((function(t){return t.ammId===r}))){t.next=6;break}throw new Error("There is already a pool for this Serum Market");case 6:return l=new w.PublicKey(n),t.next=9,E.load(e,l,void 0,new w.PublicKey(x.q));case 9:o=t.sent,c=o.asksAddress,d=o.bidsAddress,m=o.quoteMint,h=!1,y=0,k=[P.c.USDT,P.c.USDC,P.c.RAY,P.c.WSOL,P.c.SRM];case 13:if(!(y<k.length)){t.next=21;break}if(v=k[y],(null==m?void 0:m.toBase58())!==v.mintAddress){t.next=18;break}return h=!0,t.abrupt("break",21);case 18:y++,t.next=13;break;case 21:if(h){t.next=23;break}throw new Error("Only markets that contain USDC, USDT, SOL, RAY, or SRM as the Quote Token are currently supported.");case 23:return S=[],I=[],t.next=27,Object(_.m)(e,[d,c],_.a);case 27:return t.sent.forEach((function(t){var data=t.account.data,e=O.Orderbook.decode(o,data),n=e.isBids,r=e.slab;if(n){var l,c=T(r.items(!0));try{for(c.s();!(l=c.n()).done;){var d=l.value;I.push((null==o?void 0:o.priceLotsToNumber(d.key.ushrn(64)))||0)}}catch(t){c.e(t)}finally{c.f()}}else{var m,h=T(r.items(!1));try{for(h.s();!(m=h.n()).done;){var y=m.value;S.push((null==o?void 0:o.priceLotsToNumber(y.key.ushrn(64)))||0)}}catch(t){h.e(t)}finally{h.f()}}})),A=S.length>0&&I.length>0?(S[0]+I[0])/2:NaN,t.t0=M.a,t.next=33,Object(_.l)(e,o.baseMintAddress);case 33:return t.t1=t.sent,j=new t.t0(t.t1),t.t2=M.a,t.next=38,Object(_.l)(e,o.quoteMintAddress);case 38:return t.t3=t.sent,C=new t.t2(t.t3),t.abrupt("return",{market:o,price:A,msg:"",baseMintDecimals:j,quoteMintDecimals:C});case 43:if(t.prev=43,t.t4=t.catch(0),"Non-base58 character"!==t.t4.message){t.next=49;break}return t.abrupt("return",{market:null,price:null,msg:"market input error",baseMintDecimals:0,quoteMintDecimals:0});case 49:return t.abrupt("return",{market:null,price:null,msg:t.t4.message,baseMintDecimals:0,quoteMintDecimals:0});case 50:case"end":return t.stop()}}),t,null,[[0,43]])})))).apply(this,arguments)}function F(t,e,n,r,l){return L.apply(this,arguments)}function L(){return(L=Object(h.a)(regeneratorRuntime.mark((function t(e,n,r,l,o){var c,d,m,h,k,v,f,S,M,I,A,O,j,P,T,C,W,D,V,F,L,R,z,K,E,N;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return d=new w.Transaction,m=[],h=n.publicKey,t.next=5,Object(_.b)(new w.PublicKey(x.j));case 5:return k=t.sent,v=k.publicKey,f=k.nonce,S=v,t.next=11,Object(_.c)(new w.PublicKey(x.j),r.address,x.a);case 11:return M=t.sent,t.next=14,Object(_.c)(new w.PublicKey(x.j),r.address,x.d);case 14:return I=t.sent,t.next=17,Object(_.c)(new w.PublicKey(x.j),r.address,x.n);case 17:return A=t.sent,t.next=20,Object(_.c)(new w.PublicKey(x.j),r.address,x.k);case 20:return O=t.sent,t.next=23,Object(_.c)(new w.PublicKey(x.j),r.address,x.w);case 23:return j=t.sent,t.next=26,Object(_.c)(new w.PublicKey(x.j),r.address,x.v);case 26:return P=t.sent,t.next=29,Object(_.c)(new w.PublicKey(x.j),r.address,x.y);case 29:return T=t.sent,t.next=32,Object(_.c)(new w.PublicKey(x.j),r.address,x.m);case 32:return C=t.sent,W=!1,D=!1,t.next=37,Object(_.m)(e,[O],_.a);case 37:return(V=t.sent).length>0&&null!==V[0]?(F=y.b.decode(null===(c=V[0])||void 0===c?void 0:c.account.data),0===Object(y.c)(F.supply)?W=!0:D=!0):W=!1,console.log("init flag: ",W,D),d.add(Q(new w.PublicKey(x.j),P,T,S,O,r.baseMintAddress,r.quoteMintAddress,I,A,j,r.address,h,f)),t.next=43,Object(_.h)(h,O);case 43:if(L=t.sent,Object(_.e)(L.toString(),h,O.toString(),d,[]),W){t.next=64;break}return t.next=48,Object(_.o)(e,n,d,m);case 48:return R=t.sent,console.log("txid",R),z=0,t.next=53,e.onSignature(R,(function(t,e){z=t.err?-1:1}));case 53:K=(new Date).getTime(),E=!1;case 55:if(E){t.next=62;break}return console.log("txid",E,z,((new Date).getTime()-K)/1e3),0!==z&&(E=!0),t.next=60,new Promise((function(t){return setTimeout(t,1e3)}));case 60:t.next=55;break;case 62:if(1===z){t.next=64;break}throw new Error("create tx1 error");case 64:if(N={ammId:M,ammAuthority:S,poolCoinTokenAccount:I,poolPcTokenAccount:A,lpMintAddress:O,ammOpenOrders:C,ammTargetOrders:P,poolWithdrawQueue:T,poolTempLpTokenAccount:j,destLpToken:L,nonce:f},D){t.next=68;break}return t.next=68,B(e,n,r,new w.PublicKey(x.j),new w.PublicKey(x.q),N,l,o,I,A);case 68:return t.abrupt("return",M.toBase58());case 69:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function B(t,e,n,r,l,o,c,d,m,h){return R.apply(this,arguments)}function R(){return(R=Object(h.a)(regeneratorRuntime.mark((function t(e,n,r,l,o,c,d,m,h,v){var f,S,I,A,O,C,W,D,V,F,L,B,R,Q,E,$,Y,U,J,G,H,X,Z,tt,et;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=M.a,t.next=3,Object(_.l)(e,r.baseMintAddress);case 3:return t.t1=t.sent,f=new t.t0(t.t1),t.t2=M.a,t.next=8,Object(_.l)(e,r.quoteMintAddress);case 8:return t.t3=t.sent,S=new t.t2(t.t3),I=new M.a(10).exponentiatedBy(f).multipliedBy(d),A=new M.a(10).exponentiatedBy(S).multipliedBy(m),O=new w.Transaction,C=[],W=n.publicKey,t.next=17,Object(_.k)(e,W,r.baseMintAddress);case 17:return D=t.sent,t.next=20,Object(_.k)(e,W,r.quoteMintAddress);case 20:V=t.sent,F=D.value.map((function(t){return t.account.data.parsed.info.tokenAmount.amount>=Object(y.c)(I)?t.pubkey:null})),L=V.value.map((function(t){return t.account.data.parsed.info.tokenAmount.amount>=Object(y.c)(A)?t.pubkey:null})),B=null,R=T(F);try{for(R.s();!(Q=R.n()).done;)null!==(E=Q.value)&&(B=E)}catch(t){R.e(t)}finally{R.f()}$=null,Y=T(L);try{for(Y.s();!(U=Y.n()).done;)null!==(J=U.value)&&($=J)}catch(t){Y.e(t)}finally{Y.f()}if(!(null===B&&r.baseMintAddress.toString()!==P.c.WSOL.mintAddress||null===$&&r.quoteMintAddress.toString()!==P.c.WSOL.mintAddress)){t.next=31;break}throw new Error("no money");case 31:return r.baseMintAddress.toString()===P.c.WSOL.mintAddress?(G=new w.Account,O.add(w.SystemProgram.createAccount({fromPubkey:W,newAccountPubkey:G.publicKey,lamports:parseInt(I.toFixed())+1e7,space:y.a.span,programId:x.x})),O.add(Object(j.initializeAccount)({account:G.publicKey,mint:new w.PublicKey(P.c.WSOL.mintAddress),owner:W})),O.add(Object(k.g)(G.publicKey,h,W,parseInt(I.toFixed()))),O.add(Object(j.closeAccount)({source:G.publicKey,destination:W,owner:W})),C.push(G)):O.add(Object(k.g)(new w.PublicKey(B),h,W,parseInt(I.toFixed()))),r.quoteMintAddress.toString()===P.c.WSOL.mintAddress?(H=new w.Account,O.add(w.SystemProgram.createAccount({fromPubkey:W,newAccountPubkey:H.publicKey,lamports:parseInt(A.toFixed())+1e7,space:y.a.span,programId:x.x})),O.add(Object(j.initializeAccount)({account:H.publicKey,mint:new w.PublicKey(P.c.WSOL.mintAddress),owner:W})),O.add(Object(k.g)(H.publicKey,v,W,parseInt(A.toFixed()))),O.add(Object(j.closeAccount)({source:H.publicKey,destination:W,owner:W})),C.push(H)):O.add(Object(k.g)(new w.PublicKey($),v,W,parseInt(A.toFixed()))),O.add(z(l,c.ammId,c.ammAuthority,c.ammOpenOrders,c.lpMintAddress,r.baseMintAddress,r.quoteMintAddress,c.poolCoinTokenAccount,c.poolPcTokenAccount,c.poolWithdrawQueue,c.destLpToken,c.poolTempLpTokenAccount,o,r.address,W,c.nonce)),O.add(K(l,c.ammId,c.ammAuthority,c.ammOpenOrders,c.poolCoinTokenAccount,c.poolPcTokenAccount,c.ammTargetOrders,o,r.address,r.baseVault,r.quoteVault,r.requestQueue,r.eventQueue,r.bids,r.asks)),t.next=37,Object(_.o)(e,n,O,C);case 37:return X=t.sent,console.log("txid3",X),Z=0,t.next=42,e.onSignature(X,(function(t,e){Z=t.err?-1:1}));case 42:tt=(new Date).getTime(),et=!1;case 44:if(et){t.next=51;break}return console.log("txid3",et,Z,((new Date).getTime()-tt)/1e3),0!==Z&&(et=!0),t.next=49,new Promise((function(t){return setTimeout(t,1e3)}));case 49:t.next=44;break;case 51:if(1===Z){t.next=53;break}throw new Error("Transaction failed");case 53:N();case 54:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function z(e,n,r,l,o,c,d,m,h,y,k,v,f,S,M,_){var A=Object(I.struct)([Object(I.u8)("instruction"),Object(I.u8)("nonce")]),O=[{pubkey:x.x,isSigner:!1,isWritable:!1},{pubkey:x.u,isSigner:!1,isWritable:!1},{pubkey:w.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:h,isSigner:!1,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:k,isSigner:!1,isWritable:!0},{pubkey:v,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!1},{pubkey:S,isSigner:!1,isWritable:!0},{pubkey:M,isSigner:!0,isWritable:!0}],data=t.alloc(A.span);return A.encode({instruction:0,nonce:_},data),new w.TransactionInstruction({keys:O,programId:e,data:data})}function K(e,n,r,l,o,c,d,m,h,y,k,v,f,S,M){var _=Object(I.struct)([Object(I.u8)("instruction"),Object(I.u8)("nonce")]),A=[{pubkey:x.x,isSigner:!1,isWritable:!0},{pubkey:w.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:h,isSigner:!1,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:k,isSigner:!1,isWritable:!0},{pubkey:v,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:S,isSigner:!1,isWritable:!0},{pubkey:M,isSigner:!1,isWritable:!0}],data=t.alloc(_.span);return _.encode({instruction:1},data),new w.TransactionInstruction({keys:A,programId:e,data:data})}function Q(e,n,r,l,o,c,d,m,h,y,k,v,f){var S=Object(I.struct)([Object(I.u8)("instruction"),Object(I.u8)("nonce")]),M=[{pubkey:x.x,isSigner:!1,isWritable:!0},{pubkey:x.u,isSigner:!1,isWritable:!0},{pubkey:w.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!1},{pubkey:d,isSigner:!1,isWritable:!1},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:h,isSigner:!1,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:k,isSigner:!1,isWritable:!1},{pubkey:v,isSigner:!0,isWritable:!0}],data=t.alloc(S.span);return S.encode({instruction:10,nonce:f},data),new w.TransactionInstruction({keys:M,programId:e,data:data})}var E=function(t){Object(c.a)(d,t);var e,n=W(d);function d(){var t;return Object(l.a)(this,d),(t=n.apply(this,arguments)).baseVault=null,t.quoteVault=null,t.requestQueue=null,t.eventQueue=null,t.bids=null,t.asks=null,t.baseLotSize=0,t.quoteLotSize=0,t.quoteMint=null,t.baseMint=null,t}return Object(o.a)(d,null,[{key:"load",value:(e=Object(h.a)(regeneratorRuntime.mark((function t(e,address){var n,l,o,c,data,m,h,y,k,f,S,M=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=M.length>2&&void 0!==M[2]?M[2]:{},l=M.length>3?M[3]:void 0,t.t0=v.a,t.next=5,e.getAccountInfo(address);case 5:if(t.t1=t.sent,o=(0,t.t0)(t.t1,"Market not found"),c=o.owner,data=o.data,c.equals(l)){t.next=11;break}throw new Error("Address not owned by program: "+c.toBase58());case 11:if((m=this.getLayout(l).decode(data)).accountFlags.initialized&&m.accountFlags.market&&m.ownAddress.equals(address)){t.next=14;break}throw new Error("Invalid market");case 14:return t.next=16,Promise.all([Object(_.l)(e,m.baseMint),Object(_.l)(e,m.quoteMint)]);case 16:return h=t.sent,y=Object(r.a)(h,2),k=y[0],f=y[1],(S=new d(m,k,f,n,l)).decoded=m,S.baseLotSize=m.baseLotSize,S.quoteLotSize=m.quoteLotSize,S.baseVault=m.baseVault,S.quoteVault=m.quoteVault,S.requestQueue=m.requestQueue,S.eventQueue=m.eventQueue,S.bids=m.bids,S.asks=m.asks,S.quoteMint=m.quoteMint,S.baseMint=m.baseMint,t.abrupt("return",S);case 33:case"end":return t.stop()}}),t,this)}))),function(t,n){return e.apply(this,arguments)})}]),d}(A.Market);function N(){localStorage.removeItem("poolCoinTokenAccount"),localStorage.removeItem("poolPcTokenAccount"),localStorage.removeItem("lpMintAddress"),localStorage.removeItem("poolTempLpTokenAccount"),localStorage.removeItem("ammId"),localStorage.removeItem("ammOpenOrders"),localStorage.removeItem("ammTargetOrders"),localStorage.removeItem("poolWithdrawQueue"),localStorage.removeItem("destLpToken"),localStorage.removeItem("createMarket")}}).call(this,n(12).Buffer)},1382:function(t,e,n){"use strict";function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Not found";if(null===t)throw new Error(e);return t}n.d(e,"a",(function(){return r}))},1384:function(t,e,n){"use strict";n(1237)},1385:function(t,e,n){var r=n(26)(!1);r.push([t.i,".create-pool[data-v-41816ac7]{max-width:570px}.create-pool-mobile[data-v-41816ac7]{width:100%}input[data-v-41816ac7]{background:transparent;outline:none;border:none;border-bottom:1px solid #ccc;width:90%;margin:0 5%}.item-title[data-v-41816ac7],.item-title-mobile[data-v-41816ac7]{text-align:left;padding-right:5%}div[data-v-41816ac7]{word-break:break-all;word-wrap:break-word}.item-msg-mobile[data-v-41816ac7]{padding-left:10px}.ant-col[data-v-41816ac7]{margin-bottom:10px}.msgClass div[data-v-41816ac7]{line-height:30px}",""]),t.exports=r},1429:function(t,e,n){"use strict";n.r(e);n(94),n(205);var r=n(48),l=n.n(r),o=(n(633),n(632)),c=n.n(o),d=(n(140),n(87)),m=n.n(d),col=(n(296),n(175)),h=n.n(col),y=(n(297),n(174)),k=n.n(y),v=n(9),f=n(36),S=n(38),M=n(46),w=n(45),x=n(25),_=(n(1227),n(1228)),I=n.n(_),A=n(56),O=(n(40),n(55),n(156),n(95),n(30),n(110),n(406),n(155),n(177),n(130),n(176),n(89),n(37)),j=n(1381),P=n(1383),T=n(0),C=n(19),W=n(4),D=n(3),V=n(11);function F(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(x.a)(t);if(e){var l=Object(x.a)(this).constructor;n=Reflect.construct(r,arguments,l)}else n=r.apply(this,arguments);return Object(w.a)(this,n)}}var L=function(t,e,n,desc){var r,l=arguments.length,o=l<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(A.a)(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(o=(l<3?r(o):l>3?r(e,n,o):r(e,n))||o);return l>3&&o&&Object.defineProperty(e,n,o),o},B=I.a.Step,R=function(t){Object(M.a)(r,t);var e,n=F(r);function r(){var t;return Object(f.a)(this,r),(t=n.apply(this,arguments)).current=0,t.marketInputFlag=!0,t.marketFlag=!1,t.inputMarket="",t.inputQuoteValue=null,t.inputBaseValue=null,t.inputPrice=null,t.marketMsg=null,t.getMarketLoading=!1,t.marketError=null,t.stepsStatus="process",t.marketStr=null,t.marketPrice=null,t.baseMintDecimals=null,t.quoteMintDecimals=null,t.createAmmFlag=!1,t.stepTitleInputMarket="Import Serum Market ID",t.stepTitleMarketInfo="Price & Initial Liquidity",t.stepTitleInit="Initialize",t.marketTickSize=1,t.userCreateAmmId="",t.liquidityValueChangeFlag=!0,t.userLocalAmmIdList=[],t}return Object(S.a)(r,[{key:"isMobile",get:function(){return this.$accessor.isMobile}},{key:"wallet",get:function(){return this.$accessor.wallet}},{key:"oniIputQuoteValueChanged",value:function(t){var e,n=this;null!==this.inputPrice&&null!==this.baseMintDecimals&&null!==this.quoteMintDecimals&&this.liquidityValueChangeFlag&&(this.liquidityValueChangeFlag=!1,t.toString().split(".").length>1&&t.toString().split(".")[1].length>this.quoteMintDecimals&&(this.inputQuoteValue=parseFloat(parseFloat(t).toFixed(this.quoteMintDecimals))),this.inputBaseValue=Math.floor((null!==(e=this.inputQuoteValue)&&void 0!==e?e:parseFloat(t))/this.inputPrice*Math.pow(10,this.baseMintDecimals))/Math.pow(10,this.baseMintDecimals)),setTimeout((function(){n.liquidityValueChangeFlag=!0}),1)}},{key:"onInputBaseValueChanged",value:function(t){var e,n=this;null!==this.inputPrice&&null!==this.baseMintDecimals&&null!==this.quoteMintDecimals&&this.liquidityValueChangeFlag&&(this.liquidityValueChangeFlag=!1,t.toString().split(".").length>1&&t.toString().split(".")[1].length>this.baseMintDecimals&&(this.inputBaseValue=parseFloat(parseFloat(t).toFixed(this.baseMintDecimals))),this.inputQuoteValue=Math.floor((null!==(e=this.inputBaseValue)&&void 0!==e?e:parseFloat(t))*this.inputPrice*Math.pow(10,this.quoteMintDecimals))/Math.pow(10,this.quoteMintDecimals)),setTimeout((function(){n.liquidityValueChangeFlag=!0}),1)}},{key:"onInputPriceValueChanged",value:function(t){this.inputPrice&&(this.inputBaseValue&&this.quoteMintDecimals?this.inputQuoteValue=Math.floor(t*this.inputPrice*Math.pow(10,this.quoteMintDecimals))/Math.pow(10,this.quoteMintDecimals):this.inputQuoteValue&&this.baseMintDecimals&&(this.inputBaseValue=Math.floor(t/this.inputPrice*Math.pow(10,this.baseMintDecimals))/Math.pow(10,this.baseMintDecimals)))}},{key:"onInputMarketChanged",value:function(t){this.inputMarket=t.replace(/(^\s*)|(\s*$)/g,"")}},{key:"mounted",value:function(){var t=localStorage.getItem("createMarket");null!==t&&t.length>30?(this.inputMarket=t,this.getMarketMsg()):Object(j.a)(),this.updateLocalData()}},{key:"updateLocalData",value:function(){null!==localStorage.getItem("userCreateAMMID")?this.userLocalAmmIdList=localStorage.getItem("userCreateAMMID").split("+++"):this.userLocalAmmIdList=[]}},{key:"getNameForMint",value:function(t){var e=Object.values(T.c).find((function(e){return e.mintAddress===t}));return e?"".concat(e.symbol,": ").concat(t):t}},{key:"getMarketMsg",value:(e=Object(v.a)(regeneratorRuntime.mark((function t(){var e,n,r,l,o,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.getMarketLoading=!0,this.marketInputFlag=!this.marketInputFlag,t.next=4,Object(j.c)(this.$web3,this.inputMarket);case 4:if(e=t.sent,n=e.market,r=e.price,l=e.msg,o=e.baseMintDecimals,c=e.quoteMintDecimals,!this.inputMarket||null===n){t.next=14;break}return t.next=13,Object(C.c)(new W.PublicKey(D.j),new W.PublicKey(this.inputMarket),D.a);case 13:this.expectAmmId=t.sent.toString();case 14:null===n?(this.marketInputFlag=!this.marketInputFlag,this.stepsStatus="error",this.stepTitleInputMarket=l):(this.stepsStatus="process",this.stepTitleInputMarket="Import Serum Market ID",this.current=1,this.marketMsg=n,this.marketPrice=r,this.marketTickSize=Object(V.c)(new P.a(n.tickSize)),this.baseMintDecimals=o,this.quoteMintDecimals=c,this.marketStr=this.inputMarket),this.getMarketLoading=!1;case 16:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"rewriteMarket",value:function(){this.marketInputFlag=!this.marketInputFlag,this.current=0,this.marketMsg=null,this.inputMarket="",this.inputQuoteValue=0,this.inputBaseValue=0,this.inputPrice=0,this.marketError=null,this.createAmmFlag=!1,this.userCreateAmmId="",this.stepTitleMarketInfo="Price & Initial Liquidity",this.stepTitleInit="Initialize",Object(j.a)()}},{key:"createKey",value:function(){var t=this;if(this.stepTitleMarketInfo="Price & Initial Liquidity",this.stepTitleInit="Initialize",null==this.marketMsg||null===this.inputQuoteValue||null===this.inputBaseValue||null===this.inputPrice||this.inputQuoteValue<=0||this.inputBaseValue<=0||this.inputPrice<=0)return this.stepTitleMarketInfo="Please input coin value",void(this.stepsStatus="error");this.stepTitleMarketInfo="Price & Initial Liquidity",this.stepsStatus="process",this.createAmmFlag=!0,Object(j.b)(this.$web3,this.$wallet,this.marketMsg,this.inputBaseValue,this.inputQuoteValue).then(function(){var e=Object(v.a)(regeneratorRuntime.mark((function e(data){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.current=3,t.stepsStatus="process",t.userCreateAmmId=data,null!==localStorage.getItem("userCreateAMMID")?localStorage.setItem("userCreateAMMID",localStorage.getItem("userCreateAMMID")+"+++"):localStorage.setItem("userCreateAMMID",""),localStorage.setItem("userCreateAMMID",localStorage.getItem("userCreateAMMID")+"".concat((new Date).getTime(),"---").concat(data,"---").concat(t.marketMsg.address,"---").concat(t.marketMsg.baseMint.toString(),"---").concat(t.marketMsg.quoteMint.toString())),t.updateLocalData(),t.createAmmFlag=!0,e.next=9,t.$accessor.liquidity.requestInfos();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){throw t.stepsStatus="error",t.current=2,t.createAmmFlag=!1,t.stepTitleInit=e.message,e}))}}]),r}(O.Vue);L([Object(O.Watch)("inputQuoteValue")],R.prototype,"oniIputQuoteValueChanged",null),L([Object(O.Watch)("inputBaseValue")],R.prototype,"onInputBaseValueChanged",null),L([Object(O.Watch)("inputPrice")],R.prototype,"onInputPriceValueChanged",null),L([Object(O.Watch)("inputMarket")],R.prototype,"onInputMarketChanged",null);var z=R=L([Object(O.Component)({head:{title:"Raydium Create Pool"},components:{Steps:I.a,Row:k.a,Col:h.a,Button:m.a,Step:B,Tooltip:c.a,Icon:l.a}})],R),K=(n(1384),n(24)),component=Object(K.a)(z,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container",class:t.isMobile?"create-pool-mobile":"create-pool"},[t._m(0),t._v(" "),n("div",{staticClass:"card"},[n("div",{staticClass:"card-body",staticStyle:{"grid-row-gap":"0","row-gap":"0","padding-bottom":"15px"}},[n("Steps",{staticStyle:{width:"auto"},attrs:{current:t.current,size:"small",direction:"vertical",status:t.stepsStatus}},[n("Step",[n("p",{staticStyle:{"word-break":"break-word"},attrs:{slot:"title"},slot:"title"},[t._v("\n            "+t._s(t.stepTitleInputMarket)+"\n            "),n("Tooltip",{attrs:{placement:"right"}},[n("div",{attrs:{slot:"title"},slot:"title"},[t._v("\n                For details on creating a Serum Market, see\n                "),n("a",{attrs:{href:"https://raydium.gitbook.io/raydium/permissionless/creating-a-pool",target:"_blank"}},[t._v("this guide.")])]),t._v(" "),n("Icon",{attrs:{type:"info-circle"}})],1)],1)]),t._v(" "),n("Step",[n("template",{slot:"title"},[t.current>1||1===t.current&&"error"!==t.stepsStatus?n("div",[t._v(t._s(t.stepTitleMarketInfo))]):1===t.current&&"error"===t.stepsStatus?n("div",{staticStyle:{color:"red"}},[t._v("\n              "+t._s(t.stepTitleMarketInfo)+"\n            ")]):n("div",{staticStyle:{color:"rgb(87, 117, 147)"}},[t._v(t._s(t.stepTitleMarketInfo))])])],2),t._v(" "),n("Step",[n("template",{slot:"title"},[t.current>2||2===t.current&&"error"!==t.stepsStatus?n("div",[t._v(t._s(t.stepTitleInit))]):2===t.current&&"error"===t.stepsStatus?n("div",{staticStyle:{color:"red"}},[t._v(t._s(t.stepTitleInit))]):n("div",{staticStyle:{color:"rgb(87, 117, 147)"}},[t._v(t._s(t.stepTitleInit))])])],2),t._v(" "),n("Step",[n("template",{slot:"title"},[t.current>3&&"error"!==t.stepsStatus?n("div",[t._v("Pool Created")]):3===t.current&&"error"===t.stepsStatus?n("div",{staticStyle:{color:"red"}},[t._v("Pool Created")]):n("div",{staticStyle:{color:"rgb(87, 117, 147)"},attrs:{slot:"title"},slot:"title"},[t._v("Pool Created")])])],2)],1),t._v(" "),0===t.current?n("Row",{staticStyle:{"align-items":"baseline","line-height":"40px","padding-bottom":"20px"}},[n("Col",{class:t.isMobile?"item-title-mobile":"item-title",staticStyle:{"line-height":"20px"},attrs:{span:24}},[n("div",{staticStyle:{"padding-bottom":"10px","word-break":"break-word"}},[t._v("\n            This tool is for advanced users. Before attempting to create a new liquidity pool, we suggest going\n            through this\n            "),n("a",{attrs:{href:"https://raydium.gitbook.io/raydium/permissionless/creating-a-pool",target:"_blank"}},[t._v("\n              detailed guide.")])]),t._v(" "),n("div",[t._v("Input Serum Market ID:")])]),t._v(" "),n("Col",{staticStyle:{"line-height":"20px"},attrs:{span:24}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.inputMarket,expression:"inputMarket"}],attrs:{disabled:!t.marketInputFlag},domProps:{value:t.inputMarket},on:{input:function(e){e.target.composing||(t.inputMarket=e.target.value)}}})]),t._v(" "),n("Col",{staticStyle:{"padding-bottom":"20px","padding-top":"10px"},attrs:{span:(t.isMobile,24)}},[t.wallet.connected?n("Button",{staticClass:"button_div",staticStyle:{position:"absolute","z-index":"999",width:"100%"},attrs:{size:"large",ghost:"",disabled:!t.wallet.connected,loading:t.getMarketLoading},on:{click:function(e){t.marketInputFlag?t.getMarketMsg():t.rewriteMarket()}}},[t._v("\n            "+t._s(t.wallet.connected?t.getMarketLoading?"":t.marketInputFlag?"Confirm":"Cancel":"Connect")+"\n          ")]):n("Button",{staticStyle:{width:"100%"},attrs:{size:"large",ghost:""},on:{click:t.$accessor.wallet.openModal}},[t._v("\n            Connect\n          ")])],1)],1):t._e(),t._v(" "),t.current>=1?n("div",{staticClass:"msgClass",staticStyle:{"margin-top":"10px"}},[n("Row",[n("Col",{class:t.isMobile?"item-title-mobile":"item-title",attrs:{span:(t.isMobile,24)}},[t._v("Market Info:")]),t._v(" "),n("Col",{attrs:{span:(t.isMobile,24)}},[n("div",{staticStyle:{"padding-left":"10px"}},[n("div",{class:t.isMobile?"item-title-mobile":"item-title",staticStyle:{width:"100%",display:"inline-block"}},[t._v("\n                Base Token Mint Address:\n              ")]),t._v(" "),n("div",{class:t.isMobile?"item-msg-mobile":"",staticStyle:{width:"100%",display:"inline-block","text-align":"right"}},[t._v("\n                "+t._s(t.getNameForMint(t.marketMsg.baseMintAddress.toBase58()))+"\n              ")]),t._v(" "),n("div",{class:t.isMobile?"item-title-mobile":"item-title",staticStyle:{width:"100%",display:"inline-block"}},[t._v("\n                Quote Token Mint Address:\n              ")]),t._v(" "),n("div",{class:t.isMobile?"item-msg-mobile":"",staticStyle:{width:"100%",display:"inline-block","text-align":"right"}},[t._v("\n                "+t._s(t.getNameForMint(t.marketMsg.quoteMintAddress.toBase58()))+"\n              ")]),t._v(" "),n("div",{class:t.isMobile?"item-title-mobile":"item-title",staticStyle:{width:"100%",display:"inline-block"}},[t._v("\n                Expected AMM ID\n              ")]),t._v(" "),n("div",{class:t.isMobile?"item-msg-mobile":"",staticStyle:{width:"100%",display:"inline-block","text-align":"right"}},[t._v("\n                "+t._s(t.expectAmmId)+"\n              ")]),t._v(" "),n("div",{class:t.isMobile?"item-title-mobile":"item-title",staticStyle:{width:"60%",display:"inline-block"}},[t._v("\n                Tick Size:\n              ")]),t._v(" "),n("div",{class:t.isMobile?"item-msg-mobile":"",staticStyle:{width:"30%",display:"inline-block"}},[t._v("\n                "+t._s(t.marketTickSize)+"\n              ")]),t._v(" "),n("div",{class:t.isMobile?"item-title-mobile":"item-title",staticStyle:{width:"60%",display:"inline-block"}},[t._v("\n                Min Order Size:\n              ")]),t._v(" "),n("div",{class:t.isMobile?"item-msg-mobile":"",staticStyle:{width:"30%",display:"inline-block"}},[t._v("\n                "+t._s(t.marketMsg.minOrderSize)+"\n              ")]),t._v(" "),n("div",{class:t.isMobile?"item-title-mobile":"item-title",staticStyle:{width:"60%",display:"inline-block"}},[t._v("\n                Current Price:\n              ")]),t._v(" "),n("div",{class:t.isMobile?"item-msg-mobile":"",staticStyle:{width:"30%",display:"inline-block"}},[t._v("\n                "+t._s(2===t.marketMsg.tickSize.toString().split(".").length?t.marketPrice.toFixed(t.marketMsg.tickSize.toString().split(".")[1].length):parseInt((t.marketPrice/t.marketMsg.tickSize).toFixed(0))*t.marketMsg.tickSize)+"\n              ")])])]),t._v(" "),n("div",{class:t.isMobile?"item-title-mobile":"item-title",staticStyle:{width:"60%",display:"inline-block"}},[t._v("\n            Set Base Token Starting Price:\n          ")]),t._v(" "),n("div",{staticStyle:{width:"30%",display:"inline-block"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.inputPrice,expression:"inputPrice"}],staticStyle:{width:"100%"},attrs:{type:"number",disabled:t.createAmmFlag,step:1,accuracy:"2"},domProps:{value:t.inputPrice},on:{input:function(e){e.target.composing||(t.inputPrice=e.target.value)}}})]),t._v(" "),n("div",{class:t.isMobile?"item-title-mobile":"item-title",staticStyle:{width:"60%",display:"inline-block"}},[t._v("\n            Base Token Initial Liquidity:\n          ")]),t._v(" "),n("div",{staticStyle:{width:"30%",display:"inline-block"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.inputBaseValue,expression:"inputBaseValue"}],staticStyle:{width:"100%"},attrs:{type:"number",disabled:t.createAmmFlag,step:1,accuracy:"2"},domProps:{value:t.inputBaseValue},on:{input:function(e){e.target.composing||(t.inputBaseValue=e.target.value)}}})]),t._v(" "),n("div",{class:t.isMobile?"item-title-mobile":"item-title",staticStyle:{width:"60%",display:"inline-block"}},[t._v("\n            Quote Token Initial Liquidity:\n          ")]),t._v(" "),n("div",{staticStyle:{width:"30%",display:"inline-block"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.inputQuoteValue,expression:"inputQuoteValue"}],staticStyle:{width:"100%"},attrs:{type:"number",disabled:t.createAmmFlag,step:1,accuracy:"2"},domProps:{value:t.inputQuoteValue},on:{input:function(e){e.target.composing||(t.inputQuoteValue=e.target.value)}}})]),t._v(" "),n("Col",{staticStyle:{"padding-top":"10px"},attrs:{span:24}},[t.wallet.connected?3==t.current?n("Row",[n("Col",{staticStyle:{"text-align":"center","margin-top":"10px"},attrs:{span:"24"}},[n("strong",[t._v("Pool has been successfully created!")])]),t._v(" "),n("Col",{staticStyle:{"word-break":"break-word","line-height":"20px"},attrs:{span:"24"}},[t._v("Save the AMM ID below to easily search for this pool on the Swap and Liquidity page.")]),t._v(" "),n("Col",{class:t.isMobile?"item-title-mobile":"item-title",staticStyle:{"margin-top":"10px"},attrs:{span:t.isMobile?24:6}},[t._v("New AMM ID:")]),t._v(" "),n("Col",{staticStyle:{"margin-top":"10px"},attrs:{span:t.isMobile?24:18}},[n("NuxtLink",{attrs:{to:"/liquidity/?ammId="+t.userCreateAmmId}},[t._v(t._s(t.userCreateAmmId))])],1)],1):n("div",{staticStyle:{"text-align":"center","padding-top":"20px"}},[n("Button",{staticClass:"button_div",staticStyle:{"z-index":"999",width:"20%"},attrs:{size:"large",ghost:"",disabled:!t.wallet.connected,loading:t.getMarketLoading},on:{click:function(e){t.marketInputFlag?t.getMarketMsg():t.rewriteMarket()}}},[t._v("\n                "+t._s(t.wallet.connected?t.getMarketLoading?"":t.marketInputFlag?"OK":"Cancel":"Connect")+"\n              ")]),t._v(" "),n("Button",{staticClass:"button_div",staticStyle:{"z-index":"999",width:"70%"},attrs:{size:"large",ghost:"",loading:t.createAmmFlag,disabled:t.createAmmFlag||!(null!==t.inputPrice&&null!==t.inputBaseValue&&null!==t.inputQuoteValue)},on:{click:t.createKey}},[t._v("\n                "+t._s(t.createAmmFlag?"":"Confirm and Initialize Liquidity Pool")+"\n              ")]),t._v(" "),n("p",{staticStyle:{"padding-top":"20px","word-break":"break-word","line-height":"20px",margin:"0"}},[t._v("\n                After clicking 'Confirm' you will need to approve three transactions in your wallet to initialize the\n                pool, create the AMM account, and add liquidity.\n              ")])],1):n("Button",{staticStyle:{position:"absolute","z-index":"999",width:"100%"},attrs:{size:"large",ghost:""},on:{click:t.$accessor.wallet.openModal}},[t._v("\n              Connect\n            ")])],1)],1)],1):t._e()],1)]),t._v(" "),t.userLocalAmmIdList.length>0?n("div",{staticClass:"card",staticStyle:{"margin-top":"20px"}},[n("div",{staticClass:"card-body",staticStyle:{"grid-row-gap":"0","row-gap":"0","padding-bottom":"15px","padding-top":"12px"}},[n("div",{staticStyle:{"font-size":"30px","font-weight":"700"}},[t._v("Your Created Pools")]),t._v(" "),t._l(t.userLocalAmmIdList,(function(e){return[5===e.split("---").length?n("div",{key:e,staticStyle:{margin:"10px 0"}},[n("div",[t._v("AMM ID: "+t._s(e.split("---")[1]))]),t._v(" "),n("div",{staticStyle:{"text-indent":"1em","font-size":"13px"}},[t._v("Serum Market ID: "+t._s(e.split("---")[2]))]),t._v(" "),n("div",{staticStyle:{"text-indent":"1em","font-size":"13px"}},[t._v("Base Token: "+t._s(e.split("---")[3]))]),t._v(" "),n("div",{staticStyle:{"text-indent":"1em","font-size":"13px"}},[t._v("Quote Token: "+t._s(e.split("---")[4]))]),t._v(" "),n("div",{staticStyle:{"text-indent":"1em","font-size":"13px"}},[t._v("\n            Created on: "+t._s(t.$dayjs(parseInt(e.split("---")[0])).toString())+"\n          ")])]):t._e()]}))],2)]):t._e()])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-head fs-container"},[n("span",{staticClass:"title"},[t._v("Create Pool")])])}],!1,null,"41816ac7",null);e.default=component.exports}}]);